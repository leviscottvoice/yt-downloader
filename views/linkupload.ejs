<%- include('header') -%>
<%- include('home') -%>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="text-center center-div" id="login">
        <div class="container w-25 border py-5">
            <div class="title pb-5">
                <h2 class="font-weight-bold">Upload with Link</h2>
               
                    <div class="form-group">
                        <textarea  class="form-control mt-3 py-1" placeholder="Enter Video Url..."   rows="10" name="url">
                        </textarea>
                        
                        <!-- <small class="form-text text-muted text-left">Register email address</small> -->
                    </div>
                    <div style="display: flex; justify-content: left;">
                        <label for="time " class="mr-1">Start Time </label>
                        <input type="datetime-local" id="time" name="time">
                    </div>
                    <div style="display: flex; justify-content: left; margin-top:10px;">
                        <br>
                        <label for="interval" class=" " style="margin-right:25px; ">Interval </label>
                        <input type="number" class="w-25" name="interval" id="interval">
                    </div>

            </div>
                <button  href=""  name="submit" class="btn btn-success rounded-pill">Upload</button>
        </div>
    </div>
    <script>
       const upload = document.getElementsByName("submit")[0]

       upload.addEventListener("click",async()=>{
        const url = document.getElementsByName("url")[0].value.split(/\r\n|\r|\n/) 
        console.log( )
        const formdata = new FormData()
        formdata.append("urls",url.toString())
        formdata.append("time",document.getElementsByName("time")[0].value)
        formdata.append("interval",document.getElementsByName("interval")[0].value)
        const fetchdata = await fetch("/uploadurl",{
            method:"post",
            body:formdata
        })
        const resp = await fetchdata.json()
        if(resp.status == 1){
            alert("Successfully Addedd")
        }else{
            alert("Server Error")

        }
       })
    </script>
</body>
</html>